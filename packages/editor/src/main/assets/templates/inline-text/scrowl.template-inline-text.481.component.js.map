{"version":3,"file":"scrowl.template-inline-text.481.component.js","mappings":"6LAIA,MAAMA,EAAa,EAAGC,KAAIC,YAAWC,MACnC,MAAMC,EAASC,OAAe,OAC9B,IAAIC,EAAU,uBACGF,EAAOG,KAAKC,SAA7B,MACMC,IAAWN,EAAMM,SACjBC,EAAeD,EAAWN,EAAMO,aAAe,KAC/CC,EAAY,GAAGV,gBACfW,EAAOV,EAAOW,QAAQD,KAAKE,MAC3BC,EAAab,EAAOW,QAAQD,KAAKI,MACjCC,EAAgC,SAAjBP,GAA2B,YAC1CQ,EAAKhB,EAAOW,QAAQM,QAAQN,QAAQK,GAAGJ,MAEvCM,EAA6B,UADjBlB,EAAOW,QAAQQ,QAAQR,QAAQS,UAAUR,MACd,QAAU,OACjDS,EAAoBrB,EAAOsB,eAAeD,mBAAmBT,MAE7DW,EAAsBvB,EAAOsB,eAAeE,oBAAoBZ,MAChEa,EAAkBzB,EAAOW,QAAQQ,QAAQR,QAAQe,aAAad,MAC9De,GAAkB,IAAAC,QAAOH,GACzBI,GAAgB,IAAAD,QAAO,IACtBE,EAAmBC,IAAwB,IAAAC,UAAS,CACzDC,MAAOR,EAAkB,KAAO,SAG5BS,EAAShC,EAAOG,KAAK8B,WAAWD,OAEhCE,EAAmBlC,EAAOG,KAAK8B,WAAWC,iBAE1CC,EAAe,CACnBC,OAAQ,CACN,CACEC,KAAM,SACNC,KAAM,CACJ9B,KAAMG,EACN4B,MAAO,IAGX,CACEF,KAAM,YACNC,KAAM,CACJ9B,KAAMA,OAKPgC,EAAYC,IAAiB,IAAAX,WAAS,IACtCQ,EAAMI,IAAW,IAAAZ,UAASK,GAY7BZ,IACFrB,GAAW,kBAqDb,OARA,IAAAyC,YAAU,KACRlB,EAAgBmB,QAAUrB,EAC1BM,EAAqB,IAChBD,EACHG,MAAOR,EAAkB,GAAGI,EAAciB,WAAa,QACvD,GACD,CAACrB,IAGF,kBAACvB,EAAOG,KAAK0C,SAAQ,CACnBhD,GAAI,SAASU,IACbuC,UAAW5C,EACX6C,WApCyBC,IAC3BrB,EAAciB,QAAUI,EAAGC,SAEvBxB,EAAgBmB,SAClBf,EAAqB,IAChBD,EACHG,MAAO,GAAGiB,EAAGC,a,EA+BfC,MA1BmB,KACrBvB,EAAciB,QAAU,IAEnBnB,EAAgBmB,SAIrBf,EAAqB,IAChBD,EACHG,MAAO,QACP,EAiBAoB,WAAUhC,EACVE,oBAAqBA,KACjBtB,GAEJ,yBAAKF,GAAIU,EAAWuC,UAAU,mBAC5B,yBAAKA,UAAW,aAAa9B,KAC1BF,GAAM,yBAAKgC,UAAU,sBAEtB,yBAAKA,UAAW,2BACd,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,qBACb,yBAAKA,UAAU,eAAeM,MAAOxB,KAEvC,yBACEkB,UAAW,yBAAyBjC,IACpCwC,YAvEU,KAClBhD,GACFL,EAAOG,KAAKmD,KAAKC,YAAY,CAC3BlB,KAAM,QACNmB,MAAO,Q,GAqEC,4BAAQ3D,GAAG,kBAAkB4D,QAvFpB,KACjBjB,GACFC,GAAc,GACdiB,QAAQC,IAAI,+BAEZlB,GAAc,GACdiB,QAAQC,IAAI,4B,GAiFkD,oBAIpD,yBAAKb,UAAU,eACZN,EACC,kBAACR,EAAM,CAACM,KAAMA,EAAMI,QAASA,IAE7B,kBAACR,EAAgB,CAACI,KAAMA,UAsBzC,C","sources":["webpack://@scrowl/template-inline-text/./src/inline-text.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './_index.scss';\nimport { InlineTextProps } from './inline-text.types';\n\nconst InlineText = ({ id, schema, ...props }: InlineTextProps) => {\n  const Scrowl = window['Scrowl'];\n  let classes = 'template-inline-text';\n  const Markdown = Scrowl.core.Markdown;\n  const editMode = props.editMode ? true : false;\n  const focusElement = editMode ? props.focusElement : null;\n  const contentId = `${id}-inline-text`;\n  const text = schema.content.text.value;\n  const headerText = schema.content.text.label;\n  const textFocusCss = focusElement === 'text' && 'has-focus';\n  const bg = schema.content.bgImage.content.bg.value;\n  const alignment = schema.content.options.content.alignment.value;\n  const alignmentCss = alignment === 'right' ? 'right' : 'left';\n  const disableAnimations = schema.controlOptions.disableAnimations?.value;\n  //@ts-ignore\n  const stopUserAdvancement = schema.controlOptions.stopUserAdvacement?.value;\n  const showProgressBar = schema.content.options.content.showProgress.value;\n  const showProgressRef = useRef(showProgressBar);\n  const slideProgress = useRef(0);\n  const [progressBarStyles, setProgressBarStyles] = useState({\n    width: showProgressBar ? '0%' : '100%',\n  });\n  //@ts-ignore\n  const Editor = Scrowl.core.components.Editor;\n  //@ts-ignore\n  const EditorTextParser = Scrowl.core.components.EditorTextParser;\n\n  const INITIAL_DATA = {\n    blocks: [\n      {\n        type: 'header',\n        data: {\n          text: headerText,\n          level: 1,\n        },\n      },\n      {\n        type: 'paragraph',\n        data: {\n          text: text,\n        },\n      },\n    ],\n  };\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [data, setData] = useState(INITIAL_DATA);\n\n  const toggleEditMode = () => {\n    if (isEditMode) {\n      setIsEditMode(false);\n      console.log('Edit mode is now disabled');\n    } else {\n      setIsEditMode(true);\n      console.log('Edit mode is now enabled');\n    }\n  };\n\n  if (showProgressBar) {\n    classes += ' show-progress';\n  }\n\n  const handleFocusText = () => {\n    if (editMode) {\n      Scrowl.core.host.sendMessage({\n        type: 'focus',\n        field: 'text',\n      });\n    }\n  };\n\n  const handleFocusBg = () => {\n    if (editMode) {\n      Scrowl.core.host.sendMessage({\n        type: 'focus',\n        field: 'bgImage.url',\n      });\n    }\n  };\n\n  const handleSlideProgress = (ev) => {\n    slideProgress.current = ev.progress;\n\n    if (showProgressRef.current) {\n      setProgressBarStyles({\n        ...progressBarStyles,\n        width: `${ev.progress}%`,\n      });\n    }\n  };\n\n  const handleSlideEnd = () => {\n    slideProgress.current = 100;\n\n    if (!showProgressRef.current) {\n      return;\n    }\n\n    setProgressBarStyles({\n      ...progressBarStyles,\n      width: `100%`,\n    });\n  };\n\n  useEffect(() => {\n    showProgressRef.current = showProgressBar;\n    setProgressBarStyles({\n      ...progressBarStyles,\n      width: showProgressBar ? `${slideProgress.current}%` : `100%`,\n    });\n  }, [showProgressBar]);\n\n  return (\n    <Scrowl.core.Template\n      id={`slide-${contentId}`}\n      className={classes}\n      onProgress={handleSlideProgress}\n      onEnd={handleSlideEnd}\n      notScene={disableAnimations ? true : false}\n      stopUserAdvancement={stopUserAdvancement}\n      {...props}\n    >\n      <div id={contentId} className=\"owlui-container\">\n        <div className={`owlui-row ${alignmentCss}`}>\n          {bg && <div className=\"owlui-col overlay\" />}\n\n          <div className={`owlui-col text__wrapper`}>\n            <div className=\"text__container\">\n              <div className=\"progress-indictor\">\n                <div className=\"progress-bar\" style={progressBarStyles}></div>\n              </div>\n              <div\n                className={`text__value can-focus ${textFocusCss}`}\n                onMouseDown={handleFocusText}\n              >\n                <button id=\"toggle-edit-btn\" onClick={toggleEditMode}>\n                  Toggle Edit Mode\n                </button>\n\n                <div className=\"app-content\">\n                  {isEditMode ? (\n                    <Editor data={data} setData={setData} />\n                  ) : (\n                    <EditorTextParser data={data} />\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/* {(bgUrl || editMode) && (\n        <div\n          ref={bgRef}\n          className={`img__wrapper ${alignmentCss} can-focus ${bgFocusCss} ${\n            bg ? 'as-bg' : 'as-side'\n          }`}\n          onMouseDown={handleFocusBg}\n        >\n          <LazyLoad>\n            <img className=\"img__container\" aria-label={bgLabel} src={bgUrl} />\n          </LazyLoad>\n        </div>\n      )} */}\n    </Scrowl.core.Template>\n  );\n};\n\nexport { InlineText as default };\n"],"names":["InlineText","id","schema","props","Scrowl","window","classes","core","Markdown","editMode","focusElement","contentId","text","content","value","headerText","label","textFocusCss","bg","bgImage","alignmentCss","options","alignment","disableAnimations","controlOptions","stopUserAdvancement","stopUserAdvacement","showProgressBar","showProgress","showProgressRef","useRef","slideProgress","progressBarStyles","setProgressBarStyles","useState","width","Editor","components","EditorTextParser","INITIAL_DATA","blocks","type","data","level","isEditMode","setIsEditMode","setData","useEffect","current","Template","className","onProgress","ev","progress","onEnd","notScene","style","onMouseDown","host","sendMessage","field","onClick","console","log"],"sourceRoot":""}
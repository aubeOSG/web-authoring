"use strict";(self.webpackChunk_scrowl_template_lesson_outro=self.webpackChunk_scrowl_template_lesson_outro||[]).push([[252],{685:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LessonOutro)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n// @ts-ignore\n\n\n// @ts-ignore\nconst LessonOutro = ({ id, schema, lesson, ...props }) => {\n    const Scrowl = window['Scrowl'];\n    let classes = 'template-lesson-outro';\n    const editMode = props.editMode ? true : false;\n    const focusElement = editMode ? props.focusElement : null;\n    const contentId = `${id}-lesson-outro`;\n    const title = schema.content.title.value;\n    let titleClasses = 'template-lesson-outro-title can-focus';\n    const subtitle = schema.content.subtitle.value;\n    let subtitleClasses = 'template-lesson-outro-subtitle can-focus';\n    const time = schema.content.time.value;\n    let timeClasses = 'template-lesson-outro-time can-focus';\n    const startLabel = schema.content.startLabel.value;\n    let startLabelClasses = 'template-lesson-outro-start-button can-focus';\n    const bg = schema.content.bgImage.content.bg.value;\n    const bgUrl = schema.content.bgImage.content.url.value;\n    const bgLabel = schema.content.bgImage.content.alt.value || '';\n    let bgClasses = `img__wrapper can-focus ${bg ? 'as-bg' : 'as-hero'}`;\n    const bgRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const bgStyles = {\n        backgroundImage: `url(\"${bgUrl}\")`,\n    };\n    const disableAnimations = schema.controlOptions.disableAnimations?.value;\n    const [lessonQuestions, setLessonQuestion] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(lesson.attempts[0].questions);\n    if (focusElement === 'title') {\n        titleClasses += ' has-focus';\n    }\n    switch (focusElement) {\n        case 'title':\n            titleClasses += ' has-focus';\n            break;\n        case 'subtitle':\n            subtitleClasses += ' has-focus';\n            break;\n        case 'time':\n            timeClasses += ' has-focus';\n            break;\n        case 'startLabel':\n            startLabelClasses += ' has-focus';\n            break;\n        case 'bgImage.url':\n            bgClasses += ' has-focus';\n            break;\n        default:\n            console.warn('Unsupported element', focusElement);\n            break;\n    }\n    const handleFocusTitle = () => {\n        if (editMode) {\n            Scrowl.core.host.sendMessage({\n                type: 'focus',\n                field: 'title',\n            });\n        }\n    };\n    const handleFocusSubtitle = () => {\n        if (editMode) {\n            Scrowl.core.host.sendMessage({\n                type: 'focus',\n                field: 'subtitle',\n            });\n        }\n    };\n    const handleFocusTime = () => {\n        if (editMode) {\n            Scrowl.core.host.sendMessage({\n                type: 'focus',\n                field: 'time',\n            });\n        }\n    };\n    const handleFocusStartLabel = (ev) => {\n        if (editMode) {\n            Scrowl.core.host.sendMessage({\n                type: 'focus',\n                field: 'startLabel',\n            });\n        }\n        else {\n            const startCourse = new CustomEvent('startCourse', { detail: ev });\n            document.dispatchEvent(startCourse);\n        }\n    };\n    const handleFocusBg = () => {\n        if (editMode) {\n            Scrowl.core.host.sendMessage({\n                type: 'focus',\n                field: 'bgImage.url',\n            });\n        }\n    };\n    const getScore = () => {\n        const correctAnswers = lessonQuestions.filter((question) => {\n            return question.correct === true;\n        });\n        const score = correctAnswers.length / lessonQuestions.length;\n        return Math.round(score * 100);\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n        const handleUpdateOutro = (_ev) => {\n            console.log('inside outro handler: ', _ev);\n            setLessonQuestion([..._ev.detail.questions]);\n        };\n        document.addEventListener('updateOutro', handleUpdateOutro);\n    }, []);\n    console.log('lessonQuestions: ', lessonQuestions);\n    getScore();\n    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Scrowl.core.Template, { id: `slide-${contentId}`, className: classes, notScene: disableAnimations ? true : false, style: { overflow: 'hidden' }, ...props },\n        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { id: contentId, className: \"content\" },\n            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"header\", null,\n                bg && react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { className: \"overlay\" }),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h1\", { className: titleClasses, onMouseDown: handleFocusTitle }, title),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h2\", { className: subtitleClasses, onMouseDown: handleFocusSubtitle }, subtitle),\n                time && time.length > 0 && (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", { className: timeClasses, onMouseDown: handleFocusTime },\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Scrowl.ui.Icon, { icon: \"schedule\", display: \"outlined\" }),\n                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", { className: \"template-lesson-outro-time-value\" }, time))),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h2\", null,\n                    \"Score: \",\n                    getScore(),\n                    \"%\"),\n                lessonQuestions.map((question, idx) => {\n                    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { key: idx },\n                        react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", null, question.id),\n                        question.correct ? react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", null, \"Correct\") : react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"p\", null, \"Incorrect\")));\n                }),\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", { className: startLabelClasses, onMouseDown: handleFocusStartLabel }, startLabel)),\n            (bgUrl || editMode) && (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", { ref: bgRef, className: bgClasses, onMouseDown: handleFocusBg },\n                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"img\", { className: \"img__container\", \"aria-label\": bgLabel, style: bgStyles }))))));\n};\n\n\n\n//# sourceURL=webpack://@scrowl/template-lesson-outro/./src/lesson-outro.tsx?")}}]);